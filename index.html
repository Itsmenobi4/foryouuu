<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>â€” ğŸ’Œ ğ™.ğ™ğ™™/ğ™©ğ™šğ™§ğ™¡ğ™ªğ™˜ğ™ª ğŸ’</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <!-- TypeIt -->
  <script src="https://unpkg.com/typeit@8.7.0/dist/index.umd.js"></script>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap');
    
    /* Custom Animations */
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }
    
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(255, 107, 157, 0.5); }
      50% { box-shadow: 0 0 35px rgba(255, 107, 157, 0.8); }
    }
    
    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    @keyframes sparkle {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.2); }
    }
    
    @keyframes slideUp {
      0% { transform: translateY(100vh); opacity: 0; }
      100% { transform: translateY(-100vh); opacity: 0; }
    }
    
    @keyframes envelopeFloat {
      0%, 100% { transform: translateY(0) rotate(0); }
      33% { transform: translateY(-10px) rotate(1deg); }
      66% { transform: translateY(-5px) rotate(-1deg); }
    }
    
    @keyframes letterSlideOut {
      0% { transform: translate(-50%, 50%); opacity: 0; }
      100% { transform: translate(-50%, -180px) rotate(-2deg); opacity: 1; }
    }
    
    @keyframes flapOpen {
      0% { transform: rotateX(0deg); }
      100% { transform: rotateX(180deg); }
    }
    
    @keyframes letterSlideIn {
      0% { transform: translate(-50%, 50%); opacity: 0; }
      100% { transform: translate(-50%, 0); opacity: 1; }
    }
    
    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(to bottom, #ff6b9d, #ff8fab);
      border-radius: 10px;
    }
    
    .animate-float {
      animation: float 4s ease-in-out infinite;
    }
    
    .animate-pulse-glow {
      animation: pulse-glow 2s ease-in-out infinite;
    }
    
    .animate-heartbeat {
      animation: heartbeat 1.5s ease-in-out infinite;
    }
    
    .animate-sparkle {
      animation: sparkle 1s ease-in-out infinite;
    }
    
    .animate-envelope-float {
      animation: envelopeFloat 5s ease-in-out infinite;
    }
    
    /* Custom Styles for Envelope */
    .envelope-flap {
      border-left: 90px solid transparent;
      border-right: 90px solid transparent;
      border-bottom: 62px solid transparent;
      border-top: 62px solid #ff6b9d;
      transform-origin: top;
      z-index: 3;
    }
    
    .envelope-pocket {
      border-left: 90px solid #ffe6ef;
      border-right: 90px solid #ffe6ef;
      border-bottom: 62px solid #ffc2d6;
      border-top: 62px solid transparent;
      z-index: 2;
    }
    
    /* Heart shape */
    .heart::before,
    .heart::after {
      content: "";
      position: absolute;
      left: 12.5px;
      top: 0;
      width: 12.5px;
      height: 25px;
      background: #ff6b9d;
      border-radius: 12.5px 12.5px 0 0;
      transform: rotate(-45deg);
      transform-origin: 0 100%;
    }
    
    .heart::after {
      left: 0;
      transform: rotate(45deg);
      transform-origin: 100% 100%;
    }
    
    /* Memory Card Flip Animation */
    .memory-card {
      perspective: 1000px;
    }
    
    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    
    .memory-card.flipped .card-inner {
      transform: rotateY(180deg);
    }
    
    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .card-back {
      transform: rotateY(180deg);
    }
    
    /* Typewriter cursor */
    .ti-cursor {
      color: #ff6b9d;
      font-weight: bold;
    }
    
    /* Letter inside envelope */
    .letter-inside {
      position: absolute;
      width: 85%;
      height: 70%;
      background: linear-gradient(to bottom, #fffaf0, #fff5e6);
      border-radius: 4px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1;
      opacity: 0.9;
      box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
      overflow: hidden;
    }
    
    .letter-inside::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 20px;
      background: linear-gradient(to bottom, rgba(255, 107, 157, 0.1), transparent);
    }
    
    .letter-lines {
      position: absolute;
      top: 30px;
      left: 15px;
      right: 15px;
      bottom: 15px;
    }
    
    .letter-line {
      width: 100%;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255, 107, 157, 0.2), transparent);
      margin-bottom: 12px;
    }
    
    .letter-inside-text {
      position: absolute;
      bottom: 10px;
      left: 15px;
      right: 15px;
      text-align: center;
      font-family: 'Dancing Script', cursive;
      color: #ff6b9d;
      font-size: 14px;
    }
  </style>
  
  <!-- Tailwind Configuration -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'love-pink': '#ff6b9d',
            'love-pink-light': '#ff8fab',
            'love-pink-lighter': '#ffc2d6',
            'love-purple': '#d946ef',
            'love-red': '#fb7185',
            'love-bg-dark': '#1a0b2e',
            'love-bg-light': '#2d1b4e',
            'paper-beige': '#fffaf0',
            'paper-light': '#fff5e6'
          },
          fontFamily: {
            'dancing': ['Dancing Script', 'cursive'],
            'poppins': ['Poppins', 'sans-serif'],
            'playfair': ['Playfair Display', 'serif'],
          },
          animation: {
            'float': 'float 4s ease-in-out infinite',
            'heartbeat': 'heartbeat 1.5s ease-in-out infinite',
            'pulse-glow': 'pulse-glow 2s ease-in-out infinite',
            'sparkle': 'sparkle 1s ease-in-out infinite',
            'envelope-float': 'envelopeFloat 5s ease-in-out infinite',
            'flap-open': 'flapOpen 0.8s ease-in-out forwards',
            'letter-slide-out': 'letterSlideOut 1.2s 0.8s ease-in-out forwards',
            'letter-slide-in': 'letterSlideIn 1s ease-in-out forwards',
          },
          backdropBlur: {
            'xs': '2px',
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gradient-to-br from-love-bg-dark to-love-bg-light text-white font-poppins min-h-screen overflow-x-hidden">
  
  <!-- Background Elements -->
  <div class="fixed inset-0 z-0 overflow-hidden">
    <!-- Animated Gradient Background -->
    <div class="absolute inset-0 bg-gradient-to-br from-purple-900/30 via-pink-900/20 to-blue-900/30 animate-pulse"></div>
    
    <!-- Floating Hearts Background -->
    <div id="floating-hearts" class="absolute inset-0 overflow-hidden"></div>
    
    <!-- Sparkle Particles -->
    <div id="sparkle-particles" class="absolute inset-0 overflow-hidden"></div>
  </div>
  
  <!-- Main Content Container -->
  <div class="relative z-10 min-h-screen flex flex-col items-center justify-center px-4 py-8">
    
    <!-- Page 1: Envelope -->
    <div id="page1" class="w-full max-w-md mx-auto">
      <div class="text-center mb-12 animate__animated animate__fadeIn">
        <h1 class="text-4xl md:text-5xl font-dancing font-bold mb-4 bg-gradient-to-r from-love-pink to-love-purple bg-clip-text text-transparent">
          Untukmu, Sayangku ğŸ’Œ
        </h1>
        <p class="text-lg text-pink-200">Buka surat cintaku yang penuh kejutan!</p>
      </div>
      
      <!-- Envelope Container -->
      <div class="relative flex justify-center items-center h-80 animate-envelope-float">
        <!-- Envelope -->
        <div id="envelope" class="relative w-48 h-32 cursor-pointer transform transition-all duration-500 hover:scale-105">
          <!-- Envelope Flap -->
          <div class="envelope-flap absolute top-0 left-0 w-full h-full" id="envelope-flap"></div>
          
          <!-- Envelope Pocket -->
          <div class="envelope-pocket absolute top-0 left-0 w-full h-full rounded-b-lg shadow-xl"></div>
          
          <!-- Letter INSIDE the envelope (initially hidden) -->
          <div class="letter-inside">
            <div class="letter-lines">
              <div class="letter-line"></div>
              <div class="letter-line"></div>
              <div class="letter-line"></div>
              <div class="letter-line"></div>
              <div class="letter-line"></div>
            </div>
            <div class="letter-inside-text">
              Untukmu yang tersayang... ğŸ’–
            </div>
          </div>
          
          <!-- Glow Effect -->
          <div class="absolute inset-0 bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-lg blur-xl opacity-70"></div>
        </div>
        
        <!-- Letter that comes OUT of envelope (hidden initially) -->
        <div id="letter-out" class="absolute top-4 left-1/2 transform -translate-x-1/2 w-11/12 h-40 bg-gradient-to-b from-white to-pink-50 rounded-lg shadow-2xl p-6 opacity-0 z-10">
          <!-- Letter Corner Decorations -->
          <div class="absolute top-2 left-2 w-4 h-4 border-t-2 border-l-2 border-pink-300 rounded-tl-lg"></div>
          <div class="absolute bottom-2 right-2 w-4 h-4 border-b-2 border-r-2 border-pink-300 rounded-br-lg"></div>
          
          <!-- Letter Content -->
          <div class="relative z-10 h-full flex flex-col justify-center">
            <p id="letter-text" class="font-dancing text-2xl text-pink-700 text-center">
              Untukmu yang tersayang... ğŸ’–
            </p>
            <div class="mt-4 flex justify-center space-x-2">
              <div class="w-2 h-2 rounded-full bg-pink-400 animate-sparkle"></div>
              <div class="w-2 h-2 rounded-full bg-pink-400 animate-sparkle" style="animation-delay: 0.2s"></div>
              <div class="w-2 h-2 rounded-full bg-pink-400 animate-sparkle" style="animation-delay: 0.4s"></div>
            </div>
          </div>
        </div>
        
        <!-- Floating Hearts around envelope -->
        <div class="absolute -top-4 -right-4">
          <div class="text-3xl text-love-pink animate-heartbeat">ğŸ’–</div>
        </div>
        <div class="absolute -bottom-4 -left-4">
          <div class="text-3xl text-love-purple animate-heartbeat" style="animation-delay: 0.5s">ğŸ’˜</div>
        </div>
      </div>
      
      <!-- Open Button -->
      <div class="text-center mt-12 animate__animated animate__fadeInUp">
        <button id="open-btn" onclick="openEnvelope()" 
          class="px-10 py-4 bg-gradient-to-r from-love-pink to-love-purple text-white font-semibold rounded-full shadow-2xl hover:shadow-3xl transform hover:-translate-y-1 hover:scale-105 transition-all duration-300 animate-pulse-glow">
          <i class="fas fa-envelope-open-text mr-3"></i>Buka Surat Cinta
        </button>
      </div>
      
      <!-- Hint Text -->
      <p class="text-center text-pink-200 mt-8 text-sm animate__animated animate__fadeIn animate__delay-1s">
        Klik tombol di atas untuk membuka kejutan ğŸ’
      </p>
    </div>
    
    <!-- Page 2: Password -->
    <div id="page2" class="hidden w-full max-w-md mx-auto">
      <div class="backdrop-blur-xl bg-white/10 rounded-3xl p-8 border border-white/20 shadow-2xl">
        <!-- Header -->
        <div class="text-center mb-8">
          <div class="text-4xl mb-4 animate-heartbeat">ğŸ”</div>
          <h2 class="text-2xl font-bold text-white mb-2">Masukkan Password Romantis</h2>
          <p class="text-pink-200">Tebak passwordnya sayang! Aku yakin kamu tahu ğŸ˜˜</p>
          <p class="text-sm text-pink-300 mt-2">Clue: Tanggal & bulan jadian kita ğŸ’•</p>
        </div>
        
        <!-- Password Display -->
        <div class="flex justify-center space-x-4 mb-8">
          <div class="w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center text-2xl font-bold border-2 border-white/30" id="pin1"></div>
          <div class="w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center text-2xl font-bold border-2 border-white/30" id="pin2"></div>
          <div class="w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center text-2xl font-bold border-2 border-white/30" id="pin3"></div>
          <div class="w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center text-2xl font-bold border-2 border-white/30" id="pin4"></div>
        </div>
        
        <!-- Keypad -->
        <div class="grid grid-cols-3 gap-4 mb-6">
          <button onclick="inputPassword(1)" class="h-16 rounded-xl bg-white/10 hover:bg-white/20 border border-white/20 text-2xl font-bold transition-all duration-300 hover:scale-105">1</button>
          <button onclick="inputPassword(2)" class="h-16 rounded-xl bg-white/10 hover:bg-white/20 border border-white/20 text-2xl font-bold transition-all duration-300 hover:scale-105">2</button>
          <button onclick="inputPassword(3)" class="h-16 rounded-xl bg-white/10 hover:bg-white/20 border border-white/20 text-2xl font-bold transition-all duration-300 hover:scale-105">3</button>
          <button onclick="inputPassword(4)" class="h-16 rounded-xl bg-white/10 hover:bg-white/20 border border-white/20 text-2xl font-bold transition-all duration-300 hover:scale-105">4</button>
          <button onclick="inputPassword(5)" class="h-16 rounded-xl bg-white/10 hover:bg-white/20 border border-white/20 text-2xl font-bold transition-all duration-300 hover:scale-105">5</button>
          <button onclick="inputPassword(6)" class="h-16 rounded-xl bg-white/10 hover:bg-white/20 border border-white/20 text-2xl font-bold transition-all duration-300 hover:scale-105">6</button>
          <button onclick="inputPassword(7)" class="h-16 rounded-xl bg-white/10 hover:bg-white/20 border border-white/20 text-2xl font-bold transition-all duration-300 hover:scale-105">7</button>
          <button onclick="inputPassword(8)" class="h-16 rounded-xl bg-white/10 hover:bg-white/20 border border-white/20 text-2xl font-bold transition-all duration-300 hover:scale-105">8</button>
          <button onclick="inputPassword(9)" class="h-16 rounded-xl bg-white/10 hover:bg-white/20 border border-white/20 text-2xl font-bold transition-all duration-300 hover:scale-105">9</button>
          <button onclick="clearPassword()" class="h-16 rounded-xl bg-red-500/30 hover:bg-red-500/40 border border-red-400/30 text-xl font-bold transition-all duration-300 hover:scale-105"><i class="fas fa-backspace"></i></button>
          <button onclick="inputPassword(0)" class="h-16 rounded-xl bg-white/10 hover:bg-white/20 border border-white/20 text-2xl font-bold transition-all duration-300 hover:scale-105">0</button>
          <button onclick="submitPassword()" class="h-16 rounded-xl bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-xl font-bold transition-all duration-300 hover:scale-105"><i class="fas fa-check mr-2"></i>Submit</button>
        </div>
        
        <!-- Status Message -->
        <div id="password-status" class="text-center h-8">
          <!-- Status will appear here -->
        </div>
      </div>
    </div>
    
    <!-- Page 3: Memory Game -->
    <div id="page3" class="hidden w-full max-w-2xl mx-auto">
      <div class="backdrop-blur-xl bg-white/10 rounded-3xl p-8 border border-white/20 shadow-2xl">
        <!-- Header -->
        <div class="text-center mb-8">
          <div class="text-4xl mb-4 animate-heartbeat">ğŸ®</div>
          <h2 class="text-2xl font-bold text-white mb-2">Memory Game Cinta ğŸ’</h2>
          <p class="text-pink-200">Cocokkan semua pasangan hati untuk melanjutkan!</p>
        </div>
        
        <!-- Game Stats -->
        <div class="flex justify-between items-center mb-6 bg-white/10 rounded-xl p-4">
          <div class="text-center">
            <p class="text-sm text-pink-200">Pasangan Ditemukan</p>
            <p class="text-2xl font-bold" id="matches-count">0/6</p>
          </div>
          <div class="text-center">
            <p class="text-sm text-pink-200">Langkah</p>
            <p class="text-2xl font-bold" id="moves-count">0</p>
          </div>
          <div class="text-center">
            <p class="text-sm text-pink-200">Waktu</p>
            <p class="text-2xl font-bold" id="timer">60s</p>
          </div>
        </div>
        
        <!-- Game Board -->
        <div id="game-board" class="grid grid-cols-4 md:grid-cols-6 gap-3 mb-8">
          <!-- Cards will be generated here -->
        </div>
        
        <!-- Game Controls -->
        <div class="flex justify-center space-x-4">
          <button id="restart-btn" onclick="startGame()" class="px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-semibold rounded-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300">
            <i class="fas fa-redo mr-2"></i>Ulangi Game
          </button>
          <button id="next-page-btn" onclick="goToNextPage()" class="px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold rounded-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 hidden">
            <i class="fas fa-heart mr-2"></i>Lihat Pesan Cinta
          </button>
        </div>
      </div>
    </div>
    
    <!-- Page 4: Love Message -->
    <div id="page4" class="hidden w-full max-w-2xl mx-auto">
      <div class="backdrop-blur-xl bg-white/10 rounded-3xl p-8 border border-white/20 shadow-2xl">
        <!-- Sticker -->
        <div class="flex justify-center mb-6">
          <div class="relative">
            <img id="love-sticker" src="aisyah.jpg" class="w-32 h-32 rounded-full border-4 border-pink-300 shadow-2xl animate-float" alt="Love Sticker">
            <div class="absolute -top-2 -right-2 text-3xl animate-heartbeat">ğŸ’–</div>
            <div class="absolute -bottom-2 -left-2 text-3xl animate-heartbeat" style="animation-delay: 0.7s">ğŸ’</div>
          </div>
        </div>
        
        <!-- Message Container -->
        <div class="bg-gradient-to-br from-white/10 to-pink-500/10 rounded-2xl p-6 border border-white/20 mb-8 max-h-96 overflow-y-auto custom-scroll">
          <!-- Message will be typed here -->
          <div id="love-message" class="text-center">
            <h3 class="text-3xl font-dancing font-bold mb-6 text-pink-300" id="message-title"></h3>
            <div id="message-content" class="space-y-4 text-lg text-white/90 leading-relaxed"></div>
          </div>
        </div>
        
        <!-- Final Actions -->
        <div class="text-center">
          <button onclick="shareToWhatsApp()" class="px-8 py-3 bg-gradient-to-r from-green-500 to-teal-600 text-white font-semibold rounded-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 mr-4">
            <i class="fab fa-whatsapp mr-2"></i>Bagikan ke WhatsApp
          </button>
          <button onclick="resetExperience()" class="px-8 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-semibold rounded-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300">
            <i class="fas fa-sync-alt mr-2"></i>Ulangi dari Awal
          </button>
        </div>
        
        <!-- Final Note -->
        <div class="text-center mt-8 pt-6 border-t border-white/20">
          <p class="text-pink-200 text-sm">Dibuat dengan ğŸ’– penuh cinta untukmu</p>
        </div>
      </div>
    </div>
    
    <!-- Background Music -->
    <audio id="bg-music" loop>
      <source src="Ghea Indrawari - Rasa Cinta Ini (Official Video Lyric) - HITS Records.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Audio Controls -->
    <div class="fixed bottom-4 right-4 z-20">
      <button id="music-toggle" class="w-12 h-12 rounded-full bg-gradient-to-r from-pink-500 to-purple-600 flex items-center justify-center shadow-2xl hover:shadow-3xl transform hover:scale-110 transition-all duration-300">
        <i class="fas fa-music text-white"></i>
      </button>
    </div>
    
    <!-- Progress Indicator -->
    <div class="fixed top-4 right-4 z-20">
      <div class="bg-white/10 backdrop-blur-md rounded-full px-4 py-2 border border-white/20">
        <span class="text-sm font-medium" id="page-indicator">Halaman 1/4</span>
      </div>
    </div>
  </div>

  <script>
    // Configuration
    const CONFIG = {
      password: "1712", // Change this to your special date
      musicEnabled: true,
      gameTimeLimit: 60, // seconds
      cardPairs: 6
    };

    // State Variables
    let currentPage = 1;
    let passwordInput = "";
    let gameState = {
      matchedPairs: 0,
      moves: 0,
      timer: null,
      timeLeft: CONFIG.gameTimeLimit,
      flippedCards: [],
      canFlip: true
    };

    // Game Cards
    const gameCards = [
      { id: 1, icon: 'ğŸ’–', matched: false },
      { id: 2, icon: 'ğŸ’˜', matched: false },
      { id: 3, icon: 'ğŸ’', matched: false },
      { id: 4, icon: 'ğŸ’•', matched: false },
      { id: 5, icon: 'ğŸ’—', matched: false },
      { id: 6, icon: 'ğŸ’“', matched: false },
      { id: 1, icon: 'ğŸ’–', matched: false },
      { id: 2, icon: 'ğŸ’˜', matched: false },
      { id: 3, icon: 'ğŸ’', matched: false },
      { id: 4, icon: 'ğŸ’•', matched: false },
      { id: 5, icon: 'ğŸ’—', matched: false },
      { id: 6, icon: 'ğŸ’“', matched: false }
    ];

    // Love Messages
    const loveMessages = {
      title: "Untukmu, Perempuan yang paling aku sayangi... ğŸ’Œ",
      content: [
      "Halo, kamu yang diam-diam paling aku jagain ğŸ¤",
      "<br>",
      "Aku sebenernya nggak jago jelasin perasaan pakai teori,",
      "apalagi pakai kata-kata yang ribet dan terdengar pintar.",
      "Aku cuma tau satu hal:",
      "perasaan ini selalu nemu jalannya ke kamu.",
      "<br>",
      "Katanya manusia itu cuma gabungan hal-hal sederhana;",
      "sedikit unsur, banyak ruang, dan hal-hal yang nggak kelihatan.",
      "Tapi anehnya,",
      "sejak kamu ada,",
      "ruang-ruang kosong itu pelan-pelan terisi.",
      "<br>",
      "Bukan karena kamu berusaha keras,",
      "tapi karena caramu hadir selalu pas.",
      "<br>",
      "Menurut dunia, mungkin kamu biasa aja.",
      "Nggak selalu paling ramai,",
      "nggak selalu paling mencolok.",
      "Tapi menurut aku,",
      "kamu adalah",
      "<span class='text-2xl font-dancing text-pink-400 font-bold'>tempat aku pulang tanpa harus diminta ğŸ’–</span>",
      "<br>",
      "Terima kasih sudah hadir tanpa ribut,",
      "tanpa banyak janji,",
      "tanpa tuntutan yang bikin sesak.",
      "Kehadiranmu sederhana,",
      "tapi rasanya selalu cukup.",
      "<br>",
      "Aku mungkin nggak selalu pandai ngomong cinta,",
      "kadang malah lebih sering diem.",
      "Tapi di dalam diam itu,",
      "aku selalu tau ke siapa perasaan ini berpihak.",
      "<br>",
      "<span class='text-xl font-dancing text-red-400'>Aku mungkin nggak sempurna mencintai, tapi aku tulus milih kamu.</span>",
      "<br>",
      "Kalau suatu hari kata-kata ini pelan-pelan memudar,",
      "kalau layar ini akhirnya ditutup,",
      "semoga satu hal tetap tinggal:",
      "rasa yang tenang setiap kali ingat kamu.",
      "<br><br>",
      "Dengan perasaan yang tumbuh pelan-pelan,",
      "tanpa terburu-buru,",
      "tapi berniat tinggal lama.",
      "<span class='text-pink-400 font-bold'>â€” aku ğŸ’Œ</span>"
      ]
    };

    // DOM Elements
    const pages = {
      1: document.getElementById('page1'),
      2: document.getElementById('page2'),
      3: document.getElementById('page3'),
      4: document.getElementById('page4')
    };

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      // Create floating hearts background
      createFloatingHearts();
      
      // Create sparkle particles
      createSparkleParticles();
      
      // Set up music
      const musicToggle = document.getElementById('music-toggle');
      const bgMusic = document.getElementById('bg-music');
      
      musicToggle.addEventListener('click', function() {
        if (CONFIG.musicEnabled) {
          if (bgMusic.paused) {
            bgMusic.play().catch(e => console.log("Autoplay prevented"));
            musicToggle.innerHTML = '<i class="fas fa-volume-up text-white"></i>';
          } else {
            bgMusic.pause();
            musicToggle.innerHTML = '<i class="fas fa-volume-mute text-white"></i>';
          }
        }
      });
      
      // Try to play music on user interaction
      document.body.addEventListener('click', function initMusic() {
        if (CONFIG.musicEnabled && bgMusic.paused) {
          bgMusic.play().catch(e => console.log("Music autoplay prevented"));
          bgMusic.volume = 0.5;
        }
        document.body.removeEventListener('click', initMusic);
      });
      
      // Update page indicator
      updatePageIndicator();
    });

    // Page Navigation
    function goToPage(pageNumber) {
      // Hide all pages
      Object.values(pages).forEach(page => {
        if (page) page.classList.add('hidden');
      });
      
      // Show target page
      if (pages[pageNumber]) {
        pages[pageNumber].classList.remove('hidden');
        currentPage = pageNumber;
        
        // Add animation
        pages[pageNumber].classList.add('animate__animated', 'animate__fadeIn');
        
        // Update page indicator
        updatePageIndicator();
        
        // Initialize page-specific functions
        switch(pageNumber) {
          case 1:
            resetEnvelope();
            break;
          case 2:
            resetPasswordInput();
            break;
          case 3:
            startGame();
            break;
          case 4:
            showLoveMessage();
            break;
        }
      }
    }

    function updatePageIndicator() {
      const indicator = document.getElementById('page-indicator');
      if (indicator) {
        indicator.textContent = `Halaman ${currentPage}/4`;
      }
    }

    // Page 1: Envelope Functions - REVISED
    function openEnvelope() {
      const envelope = document.getElementById('envelope');
      const flap = document.getElementById('envelope-flap');
      const letterOut = document.getElementById('letter-out');
      const openBtn = document.getElementById('open-btn');
      
      // Disable button
      openBtn.disabled = true;
      openBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Membuka...';
      openBtn.classList.remove('animate-pulse-glow');
      
      // Step 1: Animate flap opening
      flap.style.animation = 'flapOpen 0.8s ease-in-out forwards';
      
      // Step 2: After flap opens, animate letter sliding out
      setTimeout(() => {
        letterOut.style.animation = 'letterSlideOut 1.2s ease-in-out forwards';
        
        // Create celebration effects when letter is fully out
        setTimeout(() => {
          createCelebrationEffects();
          
          // Transition to next page after delay
          setTimeout(() => {
            goToPage(2);
          }, 1000);
        }, 1200);
      }, 800);
    }

    function resetEnvelope() {
      const flap = document.getElementById('envelope-flap');
      const letterOut = document.getElementById('letter-out');
      const openBtn = document.getElementById('open-btn');
      
      // Reset envelope flap
      flap.style.animation = 'none';
      flap.style.transform = 'rotateX(0deg)';
      
      // Reset letter
      letterOut.style.animation = 'none';
      letterOut.style.opacity = '0';
      letterOut.style.transform = 'translate(-50%, 50%)';
      
      // Reset button
      openBtn.disabled = false;
      openBtn.innerHTML = '<i class="fas fa-envelope-open-text mr-3"></i>Buka Surat Cinta';
      openBtn.classList.add('animate-pulse-glow');
      
      // Force reflow
      setTimeout(() => {
        flap.style.animation = '';
        letterOut.style.animation = '';
      }, 10);
    }

    // Page 2: Password Functions
    function inputPassword(digit) {
      if (passwordInput.length < 4) {
        passwordInput += digit;
        updatePasswordDisplay();
        
        // Auto-submit when 4 digits entered
        if (passwordInput.length === 4) {
          setTimeout(submitPassword, 500);
        }
      }
    }

    function clearPassword() {
      passwordInput = "";
      updatePasswordDisplay();
      showPasswordStatus("", "");
    }

    function submitPassword() {
      const statusEl = document.getElementById('password-status');
      
      if (passwordInput === CONFIG.password) {
        // Correct password
        showPasswordStatus("Yeay! Benar sekali sayang! ğŸ’–", "text-green-300");
        
        // Celebration effects
        createPasswordCelebration();
        
        // Proceed to next page after delay
        setTimeout(() => {
          goToPage(3);
        }, 1500);
      } else {
        // Wrong password
        showPasswordStatus("Ups, coba lagi ya sayang! ğŸ’”", "text-red-300");
        
        // Shake animation
        const pins = ['pin1', 'pin2', 'pin3', 'pin4'];
        pins.forEach(pinId => {
          const pin = document.getElementById(pinId);
          pin.classList.add('animate__animated', 'animate__shakeX');
          setTimeout(() => {
            pin.classList.remove('animate__animated', 'animate__shakeX');
          }, 500);
        });
        
        // Clear after delay
        setTimeout(() => {
          passwordInput = "";
          updatePasswordDisplay();
          showPasswordStatus("", "");
        }, 1500);
      }
    }

    function updatePasswordDisplay() {
      for (let i = 1; i <= 4; i++) {
        const pinEl = document.getElementById(`pin${i}`);
        if (pinEl) {
          if (i <= passwordInput.length) {
            pinEl.textContent = "â€¢";
            pinEl.classList.add('bg-gradient-to-br', 'from-pink-500/40', 'to-purple-600/40');
          } else {
            pinEl.textContent = "";
            pinEl.classList.remove('bg-gradient-to-br', 'from-pink-500/40', 'to-purple-600/40');
          }
        }
      }
    }

    function showPasswordStatus(message, colorClass) {
      const statusEl = document.getElementById('password-status');
      if (statusEl) {
        statusEl.innerHTML = message;
        statusEl.className = `text-center h-8 font-medium ${colorClass} animate__animated animate__fadeIn`;
      }
    }

    function resetPasswordInput() {
      passwordInput = "";
      updatePasswordDisplay();
      showPasswordStatus("", "");
    }

    // Page 3: Memory Game Functions
    function startGame() {
      // Reset game state
      gameState = {
        matchedPairs: 0,
        moves: 0,
        timer: null,
        timeLeft: CONFIG.gameTimeLimit,
        flippedCards: [],
        canFlip: true
      };
      
      // Update UI
      document.getElementById('matches-count').textContent = `0/${CONFIG.cardPairs}`;
      document.getElementById('moves-count').textContent = '0';
      document.getElementById('timer').textContent = `${gameState.timeLeft}s`;
      document.getElementById('next-page-btn').classList.add('hidden');
      document.getElementById('restart-btn').innerHTML = '<i class="fas fa-redo mr-2"></i>Ulangi Game';
      
      // Clear previous game board
      const gameBoard = document.getElementById('game-board');
      gameBoard.innerHTML = '';
      
      // Shuffle cards
      const shuffledCards = [...gameCards].sort(() => Math.random() - 0.5);
      
      // Create card elements
      shuffledCards.forEach((card, index) => {
        const cardElement = document.createElement('div');
        cardElement.className = 'memory-card h-20 md:h-24 cursor-pointer';
        cardElement.dataset.index = index;
        cardElement.dataset.id = card.id;
        
        cardElement.innerHTML = `
          <div class="card-inner w-full h-full rounded-xl">
            <div class="card-front bg-gradient-to-br from-white/20 to-pink-500/20 border-2 border-white/30 rounded-xl flex items-center justify-center">
              <i class="fas fa-question text-white/70 text-2xl"></i>
            </div>
            <div class="card-back bg-gradient-to-br from-pink-400 to-purple-500 border-2 border-white/30 rounded-xl flex items-center justify-center">
              <span class="text-3xl">${card.icon}</span>
            </div>
          </div>
        `;
        
        cardElement.addEventListener('click', () => flipCard(cardElement));
        gameBoard.appendChild(cardElement);
      });
      
      // Start timer
      startGameTimer();
    }

    function flipCard(cardElement) {
      // Check if card can be flipped
      if (!gameState.canFlip || cardElement.classList.contains('flipped') || 
          gameState.flippedCards.length >= 2) return;
      
      // Flip the card
      cardElement.classList.add('flipped');
      gameState.flippedCards.push(cardElement);
      
      // Check for match when two cards are flipped
      if (gameState.flippedCards.length === 2) {
        gameState.moves++;
        document.getElementById('moves-count').textContent = gameState.moves;
        
        const card1 = gameState.flippedCards[0];
        const card2 = gameState.flippedCards[1];
        
        if (card1.dataset.id === card2.dataset.id) {
          // Match found
          gameState.matchedPairs++;
          document.getElementById('matches-count').textContent = `${gameState.matchedPairs}/${CONFIG.cardPairs}`;
          
          // Add match animation
          card1.classList.add('animate__animated', 'animate__pulse');
          card2.classList.add('animate__animated', 'animate__pulse');
          
          // Clear flipped cards
          gameState.flippedCards = [];
          
          // Check if game is complete
          if (gameState.matchedPairs === CONFIG.cardPairs) {
            endGame(true);
          }
        } else {
          // No match - flip back after delay
          gameState.canFlip = false;
          setTimeout(() => {
            card1.classList.remove('flipped');
            card2.classList.remove('flipped');
            gameState.flippedCards = [];
            gameState.canFlip = true;
          }, 1000);
        }
      }
    }

    function startGameTimer() {
      // Clear existing timer
      if (gameState.timer) clearInterval(gameState.timer);
      
      // Start new timer
      gameState.timer = setInterval(() => {
        gameState.timeLeft--;
        document.getElementById('timer').textContent = `${gameState.timeLeft}s`;
        
        if (gameState.timeLeft <= 0) {
          endGame(false);
        }
      }, 1000);
    }

    function endGame(isWin) {
      // Stop timer
      clearInterval(gameState.timer);
      
      // Show result
      if (isWin) {
        // Win - show celebration
        createGameCelebration();
        
        // Show next page button
        const nextBtn = document.getElementById('next-page-btn');
        nextBtn.classList.remove('hidden');
        nextBtn.innerHTML = '<i class="fas fa-heart mr-2"></i>Lihat Pesan Cinta ğŸ’–';
        
        // Update restart button
        document.getElementById('restart-btn').innerHTML = '<i class="fas fa-trophy mr-2"></i>Main Lagi';
      } else {
        // Lose - show message
        const statusEl = document.getElementById('password-status');
        if (statusEl) {
          statusEl.textContent = "Waktu habis! Coba lagi ya sayang! ğŸ’”";
          statusEl.className = "text-center h-8 text-red-300 font-medium animate__animated animate__fadeIn";
        }
      }
    }

    function goToNextPage() {
      goToPage(4);
    }

    // Page 4: Love Message Functions
    function showLoveMessage() {
      const titleEl = document.getElementById('message-title');
      const contentEl = document.getElementById('message-content');
      
      // Set title
      titleEl.textContent = loveMessages.title;
      
      // Clear content
      contentEl.innerHTML = '';
      
      // Type message with TypeIt
      let typeItInstance = new TypeIt(contentEl, {
        speed: 50,
        lifeLike: true,
        cursor: true,
        afterComplete: function() {
          // Add final animation
          contentEl.classList.add('animate__animated', 'animate__pulse');
        }
      });
      
      // Add each line of the message
      loveMessages.content.forEach(line => {
        if (line === '<br>') {
          typeItInstance.break();
        } else {
          typeItInstance.type(line).pause(500);
        }
      });
      
      // Start typing
      typeItInstance.go();
      
      // Change sticker after delay
      setTimeout(() => {
        const sticker = document.getElementById('love-sticker');
        sticker.src = "https://cdn.pixabay.com/photo/2023/08/21/15/41/heart-8205443_1280.png";
        sticker.classList.add('animate__animated', 'animate__heartBeat');
      }, 3000);
    }

    function shareToWhatsApp() {
      const message = "Aku baru saja menerima pesan cinta yang sangat spesial! ğŸ’– Lihat pesan ini: " + window.location.href;
      const encodedMessage = encodeURIComponent(message);
      window.open(`https://wa.me/?text=${encodedMessage}`, '_blank');
    }

    function resetExperience() {
      if (confirm("Apakah kamu ingin mengulangi pengalaman ini dari awal?")) {
        currentPage = 1;
        passwordInput = "";
        goToPage(1);
      }
    }

    // Visual Effects Functions
    function createFloatingHearts() {
      const container = document.getElementById('floating-hearts');
      if (!container) return;
      
      // Create hearts
      for (let i = 0; i < 15; i++) {
        const heart = document.createElement('div');
        heart.className = 'absolute text-2xl md:text-3xl';
        heart.innerHTML = ['ğŸ’–', 'ğŸ’˜', 'ğŸ’', 'ğŸ’•', 'ğŸ’—', 'ğŸ’“'][Math.floor(Math.random() * 6)];
        heart.style.left = `${Math.random() * 100}%`;
        heart.style.top = `${Math.random() * 100}%`;
        heart.style.opacity = Math.random() * 0.5 + 0.3;
        heart.style.animation = `float ${Math.random() * 10 + 10}s linear infinite`;
        heart.style.animationDelay = `${Math.random() * 5}s`;
        
        container.appendChild(heart);
      }
    }

    function createSparkleParticles() {
      const container = document.getElementById('sparkle-particles');
      if (!container) return;
      
      // Create sparkles
      for (let i = 0; i < 30; i++) {
        const sparkle = document.createElement('div');
        sparkle.className = 'absolute rounded-full bg-white';
        sparkle.style.width = `${Math.random() * 4 + 2}px`;
        sparkle.style.height = sparkle.style.width;
        sparkle.style.left = `${Math.random() * 100}%`;
        sparkle.style.top = `${Math.random() * 100}%`;
        sparkle.style.opacity = Math.random() * 0.7 + 0.3;
        sparkle.style.animation = `sparkle ${Math.random() * 3 + 2}s ease-in-out infinite`;
        sparkle.style.animationDelay = `${Math.random() * 2}s`;
        
        container.appendChild(sparkle);
      }
    }

    function createCelebrationEffects() {
      // Create explosion of hearts
      const envelope = document.getElementById('envelope');
      for (let i = 0; i < 20; i++) {
        const heart = document.createElement('div');
        heart.className = 'absolute text-2xl';
        heart.innerHTML = ['ğŸ’–', 'ğŸ’˜', 'ğŸ’'][Math.floor(Math.random() * 3)];
        heart.style.left = '50%';
        heart.style.top = '50%';
        heart.style.transform = 'translate(-50%, -50%)';
        heart.style.zIndex = '100';
        
        // Random animation
        const angle = Math.random() * Math.PI * 2;
        const distance = 100 + Math.random() * 100;
        const duration = 1 + Math.random();
        
        heart.animate([
          { transform: 'translate(-50%, -50%) scale(1)', opacity: 1 },
          { transform: `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(0)`, opacity: 0 }
        ], {
          duration: duration * 1000,
          easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)'
        });
        
        // Add to DOM and remove after animation
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), duration * 1000);
      }
    }

    function createPasswordCelebration() {
      const passwordContainer = document.getElementById('page2');
      
      // Create floating hearts
      for (let i = 0; i < 10; i++) {
        const heart = document.createElement('div');
        heart.className = 'absolute text-3xl';
        heart.innerHTML = 'ğŸ’–';
        heart.style.left = `${Math.random() * 80 + 10}%`;
        heart.style.top = '100%';
        heart.style.zIndex = '10';
        
        // Animation
        heart.animate([
          { transform: 'translateY(0) scale(1)', opacity: 1 },
          { transform: 'translateY(-200px) scale(1.5)', opacity: 0 }
        ], {
          duration: 1500,
          easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)',
          delay: i * 100
        });
        
        // Add to DOM and remove after animation
        passwordContainer.appendChild(heart);
        setTimeout(() => heart.remove(), 1600);
      }
    }

    function createGameCelebration() {
      // Confetti effect
      const gameContainer = document.getElementById('page3');
      
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'absolute';
        confetti.innerHTML = ['ğŸ’–', 'ğŸ’˜', 'ğŸ’', 'ğŸ‰', 'ğŸŠ', 'âœ¨'][Math.floor(Math.random() * 6)];
        confetti.style.fontSize = `${Math.random() * 20 + 15}px`;
        confetti.style.left = `${Math.random() * 100}%`;
        confetti.style.top = '-50px';
        confetti.style.zIndex = '10';
        
        // Random animation
        const duration = 1 + Math.random() * 2;
        const horizontalMovement = (Math.random() - 0.5) * 200;
        
        confetti.animate([
          { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
          { transform: `translateY(300px) translateX(${horizontalMovement}px) rotate(${360 * 2}deg)`, opacity: 0 }
        ], {
          duration: duration * 1000,
          easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)'
        });
        
        // Add to DOM and remove after animation
        gameContainer.appendChild(confetti);
        setTimeout(() => confetti.remove(), duration * 1000);
      }
    }
  </script>
</body>
</html>